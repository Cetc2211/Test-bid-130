<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EvaluaciÃ³n BHS - CBTa 130</title>
<style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; background-color: #f0f2f5; color: #1c1c1e; }
    /* Encabezado NEGRO/GRIS para BHS */
    header { background: linear-gradient(135deg, #212121 0%, #424242 100%); color: white; text-align: center; padding: 25px; font-weight: bold; font-size: 1.4rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .container { max-width: 800px; margin: 20px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    h2 { color: #212121; text-align: center; margin-top: 0; border-bottom: 2px solid #bdbdbd; padding-bottom: 10px; }
    
    .input-group { margin-bottom: 15px; }
    label { font-weight: 600; display: block; margin-bottom: 8px; color: #333; }
    input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
    
    .question-item { border-bottom: 1px solid #eee; padding: 15px 0; display: flex; justify-content: space-between; align-items: center; gap: 10px; }
    .q-text { flex: 1; font-weight: 500; color: #333; }
    .q-opts { display: flex; gap: 15px; min-width: 120px; }
    .opt-label { cursor: pointer; display: flex; align-items: center; gap: 5px; font-weight: bold; }
    .opt-v { color: #2E7d32; }
    .opt-f { color: #c62828; }

    .buttons { display: flex; flex-direction: column; gap: 15px; margin-top: 30px; }
    button { padding: 16px; border: none; border-radius: 12px; font-size: 1.1em; font-weight: 700; color: white; cursor: pointer; width: 100%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .whatsapp { background-color: #25D366; }
    .reset { background-color: #757575; }
    input[type="radio"] { transform: scale(1.5); cursor: pointer; }
    #result-area { display: none; text-align: center; margin-top: 20px; padding: 20px; background: #f5f5f5; border-radius: 10px; }
</style>
</head>
<body>
<header>CBTa No.130<br><span style="font-size:0.8em; font-weight:normal">Escala de Desesperanza (BHS)</span></header>

<div class="container">
    <div id="test-form">
        <h2>Datos del Alumno</h2>
        <div class="input-group"><label>Nombre Completo:</label><input type="text" id="nombre" required></div>
        <div class="input-group"><label>Fecha:</label><input type="date" id="fecha" required></div>
        
        <div style="background-color:#eee; padding:15px; border-radius:8px; margin:20px 0; font-size:0.9em; border-left:5px solid #212121;">
            <strong>Instrucciones:</strong> Lea cada afirmaciÃ³n y marque si es <strong>VERDADERA (V)</strong> o <strong>FALSA (F)</strong> para usted durante la Ãºltima semana.
        </div>

        <div id="questions-list"></div>

        <div class="buttons">
            <button type="button" class="whatsapp" onclick="finalizarTest()">âœ… Finalizar y Enviar</button>
        </div>
    </div>

    <div id="result-area">
        <h3 style="color:#212121;">Â¡Registro Completado!</h3>
        <p>Datos guardados con confidencialidad.</p>
        <div class="buttons">
            <button type="button" class="whatsapp" onclick="enviarWhatsApp()">ðŸ“² Enviar Datos por WhatsApp</button>
            <button type="button" class="reset" onclick="location.reload()">ðŸ”„ Nuevo Test</button>
        </div>
    </div>
</div>

<script>
    const NUMERO_DESTINO = "523111477413"; 
    
    const items = [
        "1. Veo el futuro con esperanza y entusiasmo",
        "2. QuizÃ¡ deberÃ­a abandonar todo porque no puedo hacer las cosas mejor",
        "3. Cuando las cosas estÃ¡n mal, me ayuda pensar que no serÃ¡ asÃ­ para siempre",
        "4. No puedo imaginar cÃ³mo serÃ¡ mi vida dentro de 10 aÃ±os",
        "5. Tengo tiempo suficiente para realizar las cosas que mÃ¡s deseo hacer",
        "6. En el futuro, espero tener Ã©xito en lo que mÃ¡s me importa",
        "7. Mi futuro me parece oscuro",
        "8. Espero que me sucedan mÃ¡s cosas buenas que al resto de la gente",
        "9. No tengo suerte y no hay razÃ³n para creer que la tendrÃ© en el futuro",
        "10. Mis experiencias pasadas me han preparado bien para el futuro",
        "11. Todo lo que puedo ver por delante es mÃ¡s desagradable que agradable",
        "12. No espero conseguir lo que realmente quiero",
        "13. Cuando pienso en el futuro, espero ser mÃ¡s feliz de lo que soy ahora",
        "14. Las cosas nunca van a marchar de la forma que yo quiero",
        "15. Tengo gran fe en el futuro",
        "16. Nunca consigo lo que quiero, asÃ­ que es absurdo querer algo",
        "17. Es muy poco probable que en el futuro logre una satisfacciÃ³n real",
        "18. El futuro me parece vago e incierto",
        "19. Se pueden esperar mÃ¡s Ã©pocas buenas que malas",
        "20. Es inÃºtil tratar de conseguir algo que deseo porque probablemente no lo conseguirÃ©"
    ];

    const container = document.getElementById('questions-list');
    items.forEach((txt, i) => {
        let idx = i + 1;
        container.innerHTML += `
            <div class="question-item">
                <div class="q-text">${txt}</div>
                <div class="q-opts">
                    <label class="opt-label opt-v"><input type="radio" name="bhs${idx}" value="V"> V</label>
                    <label class="opt-label opt-f"><input type="radio" name="bhs${idx}" value="F"> F</label>
                </div>
            </div>`;
    });

    document.getElementById('fecha').valueAsDate = new Date();
    let datosFinales = null;

    function finalizarTest() {
        const nombre = document.getElementById('nombre').value;
        const fecha = document.getElementById('fecha').value;
        if(!nombre) { alert("Nombre requerido"); return; }

        let total = 0, count = 0;
        
        // CLAVE DE RESPUESTA (Suma 1 punto si coincide)
        // True: 2, 4, 7, 9, 11, 12, 14, 16, 17, 18, 20
        // False: 1, 3, 5, 6, 8, 10, 13, 15, 19
        const keyTrue = [2, 4, 7, 9, 11, 12, 14, 16, 17, 18, 20];

        for(let i=1; i<=20; i++){
            const el = document.querySelector(`input[name="bhs${i}"]:checked`);
            if(el) {
                let v = el.value; // "V" o "F"
                if (keyTrue.includes(i)) {
                    if(v === "V") total++;
                } else {
                    if(v === "F") total++;
                }
                count++;
            }
        }
        
        if(count < 20) { alert(`Faltan preguntas (${count}/20)`); return; }

        datosFinales = { nombre, fecha, total };

        document.getElementById('test-form').style.display = 'none';
        document.getElementById('result-area').style.display = 'block';
        window.scrollTo(0,0);
    }

    function enviarWhatsApp(){
        if(!datosFinales) return;
        let m = `âš« *DATOS BHS*%0AðŸ‘¤ ${datosFinales.nombre}%0AðŸ“… ${datosFinales.fecha}%0AðŸ“Š Score: ${datosFinales.total}`;
        window.location.href = `https://wa.me/${NUMERO_DESTINO}?text=${m}`;
    }
</script>
</body>
</html>

