<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EvaluaciÃ³n HADS - CBTa 130</title>
<style>
    body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; margin: 0; background-color: #f0f2f5; color: #1c1c1e; }
    /* Encabezado VINO/MAGENTA */
    header { background: linear-gradient(135deg, #880e4f 0%, #ad1457 100%); color: white; text-align: center; padding: 25px; font-weight: bold; font-size: 1.4rem; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .container { max-width: 800px; margin: 20px auto; padding: 20px; background: white; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
    h2 { color: #880e4f; text-align: center; margin-top: 0; border-bottom: 2px solid #f8bbd0; padding-bottom: 10px; }
    
    .input-group { margin-bottom: 15px; }
    label { font-weight: 600; display: block; margin-bottom: 8px; color: #333; }
    input { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
    
    .question-card { background: #fff; border-bottom: 1px solid #eee; padding: 20px 0; }
    .question-title { font-weight: bold; font-size: 1.1em; margin-bottom: 15px; color: #880e4f; }
    
    .options-group { display: flex; flex-direction: column; gap: 8px; }
    .option-label { display: flex; align-items: center; padding: 10px; cursor: pointer; border-radius: 6px; border: 1px solid #eee; transition: background 0.2s; }
    .option-label:hover { background-color: #fce4ec; }
    .option-label input { margin-right: 15px; transform: scale(1.3); }
    
    .buttons { display: flex; flex-direction: column; gap: 15px; margin-top: 30px; }
    button { padding: 16px; border: none; border-radius: 12px; font-size: 1.1em; font-weight: 700; color: white; cursor: pointer; width: 100%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .whatsapp { background-color: #25D366; }
    .reset { background-color: #757575; }
    #result-area { display: none; text-align: center; margin-top: 20px; padding: 20px; background: #fce4ec; border-radius: 10px; }
</style>
</head>
<body>
<header>CBTa No.130<br><span style="font-size:0.8em; font-weight:normal">Escala Hospitalaria (HADS)</span></header>

<div class="container">
    <div id="test-form">
        <h2>Datos del Alumno</h2>
        <div class="input-group"><label>Nombre Completo:</label><input type="text" id="nombre" required></div>
        <div class="input-group"><label>Fecha:</label><input type="date" id="fecha" required></div>
        
        <div style="background-color:#fce4ec; padding:15px; border-radius:8px; margin:20px 0; font-size:0.9em; border-left:5px solid #880e4f;">
            <strong>Instrucciones:</strong> Marque la respuesta que mejor describa cÃ³mo se ha sentido durante la <strong>Ãºltima semana</strong>.
        </div>

        <div id="cuestionario"></div>

        <div class="buttons">
            <button type="button" class="whatsapp" onclick="finalizarTest()">âœ… Finalizar y Enviar</button>
        </div>
    </div>

    <div id="result-area">
        <h3 style="color:#880e4f;">Â¡Registro Completado!</h3>
        <p>Datos listos para su envÃ­o.</p>
        <div class="buttons">
            <button type="button" class="whatsapp" onclick="enviarWhatsApp()">ðŸ“² Enviar Datos por WhatsApp</button>
            <button type="button" class="reset" onclick="location.reload()">ðŸ”„ Nuevo Test</button>
        </div>
    </div>
</div>

<script>
    const NUMERO_DESTINO = "523111477413"; 
    
    // Estructura: t=TÃ­tulo, vals=Valores [0,1,2,3] o [3,2,1,0] segÃºn el orden de las opciones
    const items = [
        { t: "1. Me siento tenso o nervioso", opts: ["Casi todo el dÃ­a", "Gran parte del dÃ­a", "De vez en cuando", "Nunca"], vals: [3, 2, 1, 0] },
        { t: "2. Sigo disfrutando de las cosas como siempre", opts: ["Ciertamente, igual", "No tanto como antes", "Solamente un poco", "Ya no disfruto nada"], vals: [0, 1, 2, 3] },
        { t: "3. Siento temor como si algo malo fuera a suceder", opts: ["SÃ­, muy intenso", "SÃ­, pero no intenso", "SÃ­, pero no me preocupa", "No siento nada de eso"], vals: [3, 2, 1, 0] },
        { t: "4. Soy capaz de reÃ­rme y ver el lado gracioso", opts: ["Igual que siempre", "Algo menos", "Mucho menos", "En absoluto"], vals: [0, 1, 2, 3] },
        { t: "5. Tengo la cabeza llena de preocupaciones", opts: ["Casi todo el dÃ­a", "Gran parte del dÃ­a", "De vez en cuando", "Nunca"], vals: [3, 2, 1, 0] },
        { t: "6. Me siento alegre", opts: ["Nunca", "Muy pocas veces", "En algunas ocasiones", "Gran parte del dÃ­a"], vals: [3, 2, 1, 0] },
        { t: "7. Puedo estar sentado tranquilo y relajado", opts: ["Siempre", "A menudo", "Raras veces", "Nunca"], vals: [0, 1, 2, 3] },
        { t: "8. Me siento lento y torpe", opts: ["Gran parte del dÃ­a", "A menudo", "A veces", "Nunca"], vals: [3, 2, 1, 0] },
        { t: "9. SensaciÃ³n de nervios/hormigueo en estÃ³mago", opts: ["Nunca", "Solo en ocasiones", "A menudo", "Muy a menudo"], vals: [0, 1, 2, 3] },
        { t: "10. He perdido interÃ©s por mi aspecto personal", opts: ["Completamente", "No me cuido bien", "QuizÃ¡s no me cuide", "Me cuido como siempre"], vals: [3, 2, 1, 0] },
        { t: "11. Me siento inquieto, no puedo parar de moverme", opts: ["Realmente mucho", "Bastante", "No mucho", "En absoluto"], vals: [3, 2, 1, 0] },
        { t: "12. Espero las cosas con ilusiÃ³n", opts: ["Como siempre", "Algo menos", "Mucho menos", "En absoluto"], vals: [0, 1, 2, 3] },
        { t: "13. Sensaciones repentinas de angustia/temor", opts: ["Muy a menudo", "Con frecuencia", "Raramente", "Nunca"], vals: [3, 2, 1, 0] },
        { t: "14. Disfruto con un buen libro o programa TV", opts: ["A menudo", "Algunas veces", "Pocas veces", "Casi nunca"], vals: [0, 1, 2, 3] }
    ];

    const container = document.getElementById('cuestionario');
    items.forEach((item, idx) => {
        const num = idx + 1;
        let html = `<div class="question-card"><div class="question-title">${item.t}</div><div class="options-group">`;
        item.opts.forEach((optText, i) => {
            // El valor real (score) se saca del array vals
            let score = item.vals[i]; 
            html += `<label class="option-label"><input type="radio" name="q${num}" value="${score}" required> ${optText}</label>`;
        });
        html += `</div></div>`;
        container.innerHTML += html;
    });

    document.getElementById('fecha').valueAsDate = new Date();
    let datosFinales = null;

    function finalizarTest() {
        const nombre = document.getElementById('nombre').value;
        const fecha = document.getElementById('fecha').value;
        if(!nombre) { alert("Nombre requerido"); return; }

        let scoreA = 0, scoreD = 0, count = 0;
        
        for(let i=1; i<=14; i++){
            const el = document.querySelector(`input[name="q${i}"]:checked`);
            if(el) {
                let v = parseInt(el.value);
                // Impares = Ansiedad, Pares = DepresiÃ³n
                if(i % 2 !== 0) scoreA += v; else scoreD += v;
                count++;
            }
        }
        
        if(count < 14) { alert(`Faltan preguntas (${count}/14)`); return; }

        datosFinales = { nombre, fecha, scoreA, scoreD };

        document.getElementById('test-form').style.display = 'none';
        document.getElementById('result-area').style.display = 'block';
        window.scrollTo(0,0);
    }

    function enviarWhatsApp(){
        if(!datosFinales) return;
        let m = `ðŸ¥ *DATOS HADS*%0AðŸ‘¤ ${datosFinales.nombre}%0AðŸ“… ${datosFinales.fecha}%0AðŸ…°ï¸ Ansiedad: ${datosFinales.scoreA}%0AðŸ‡© DepresiÃ³n: ${datosFinales.scoreD}`;
        window.location.href = `https://wa.me/${NUMERO_DESTINO}?text=${m}`;
    }
</script>
</body>
</html>

